alerts:
  - rule: DEPLOYMENT_FAILED
  - rule: DOMAIN_FAILED

features:
  - buildpack-stack=ubuntu-22

ingress:
  rules:
    - component:
        name: ytauto
      match:
        authority:
          exact: ""
        path:
          prefix: /

name: shark-app
region: blr

services:
  - dockerfile_path: Dockerfile
    envs:
      - key: PORT
        scope: RUN_AND_BUILD_TIME
        value: "5001"
      - key: NODE_ENV
        scope: RUN_AND_BUILD_TIME
        value: production
      - key: GOOGLE_CLIENT_ID
        scope: RUN_AND_BUILD_TIME
        value: YOUR_GOOGLE_CLIENT_ID
      - key: GOOGLE_CLIENT_SECRET
        scope: RUN_AND_BUILD_TIME
        value: YOUR_GOOGLE_CLIENT_SECRET
      - key: REDIRECT_URI
        scope: RUN_AND_BUILD_TIME
        value: https://shark-app-emu4p.ondigitalocean.app/api/youtube/auth-callback
    github:
      branch: main
      deploy_on_push: true
      repo: apdue/ytauto
    http_port: 8080
    instance_count: 1
    instance_size_slug: apps-s-2vcpu-2gb
    name: ytauto
    source_dir: /

